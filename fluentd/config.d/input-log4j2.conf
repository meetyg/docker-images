<source>
    @type tail
    format multiline
    format_firstline /^\^\|(?<time>.*)\|/
    format1 /^\^\|(?<time>.*)\|(?<level>.*)\|(?<thread>.*)\|(?<logger>.*)\|\r?\n/
    format2 /(?<msg>[\s\S]*?)(?:Exception stack trace:(?<ex>[\s\S]*)?)?\r?\n?\$\r?\n?$/ 
    time_format %Y-%m-%d %H:%M:%S,%N 
    read_from_head true
    tag applog.*
    path "/var/log/app/*/*_#LAST.logmx"
    pos_file /var/log/td-agent/pos/log4j2.applog.pos
</source>
